import{a as L}from"./chunk-ZRCKKCIW.js";import{c as G,d as q}from"./chunk-DBZRNEX3.js";import{$ as B,A as C,B as _,H as y,I as k,M as V,W as A,X as T,Y as N,Z as W,_ as I,a as P,aa as F,c as j,f as O,g as l,ga as z,h as s,ha as D,k as d,l as w,m as x,n as f,o as E,p as n,q as o,r as b,s as v,t as g,u as m,v as i,w as p,x as S,z as u}from"./chunk-INERZMVE.js";var h=j(G());function H(c,M){if(c&1){let e=v();n(0,"tr")(1,"td"),i(2),o(),n(3,"td"),i(4),o(),n(5,"td"),i(6),o(),n(7,"td"),i(8),o(),n(9,"td")(10,"span",9),i(11),o()(),n(12,"td",10)(13,"button",11),g("click",function(){let t=l(e).$implicit,a=m();return s(a.openModal(t))}),b(14,"i",12),o(),n(15,"button",13),g("click",function(){let t=l(e).$implicit,a=m();return s(a.deleteCadete(t.id))}),b(16,"i",14),o()()()}if(c&2){let e=M.$implicit;d(2),p(e.nombre),d(2),p(e.apellido),d(2),p(e.vehiculo),d(2),p(e.telefono),d(2),E("active",e.activo),d(),S(" ",e.activo?"Activo":"Inactivo"," ")}}function R(c,M){c&1&&(n(0,"tr")(1,"td",15),i(2,"No hay cadetes registrados"),o()())}function J(c,M){if(c&1){let e=v();n(0,"div",16),g("click",function(){l(e);let t=m();return s(t.closeModal())}),n(1,"div",17),g("click",function(t){return l(e),s(t.stopPropagation())}),n(2,"button",18),g("click",function(){l(e);let t=m();return s(t.closeModal())}),i(3,"\xD7"),o(),n(4,"h2"),i(5),o(),n(6,"form",19),g("ngSubmit",function(){l(e);let t=m();return s(t.saveCadete())}),n(7,"div",20)(8,"label"),i(9,"Nombre"),o(),n(10,"input",21),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.nombre,t)||(a.currentCadete.nombre=t),s(t)}),o()(),n(11,"div",20)(12,"label"),i(13,"Apellido"),o(),n(14,"input",22),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.apellido,t)||(a.currentCadete.apellido=t),s(t)}),o()(),n(15,"div",20)(16,"label"),i(17,"Veh\xEDculo"),o(),n(18,"input",23),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.vehiculo,t)||(a.currentCadete.vehiculo=t),s(t)}),o()(),n(19,"div",20)(20,"label"),i(21,"Tel\xE9fono"),o(),n(22,"input",24),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.telefono,t)||(a.currentCadete.telefono=t),s(t)}),o()(),n(23,"div",25)(24,"label")(25,"input",26),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.activo,t)||(a.currentCadete.activo=t),s(t)}),o(),i(26," Cadete Activo (Disponible para repartos) "),o()(),n(27,"button",27),i(28,"Guardar"),o()()()()}if(c&2){let e=m();d(5),p(e.isEditing?"Editar Cadete":"Nuevo Cadete"),d(5),u("ngModel",e.currentCadete.nombre),d(4),u("ngModel",e.currentCadete.apellido),d(4),u("ngModel",e.currentCadete.vehiculo),d(4),u("ngModel",e.currentCadete.telefono),d(3),u("ngModel",e.currentCadete.activo)}}var ne=(()=>{class c{cadeteService=O(L);cadetes=[];showModal=!1;isEditing=!1;currentCadete={nombre:"",apellido:"",vehiculo:"",telefono:"",activo:!0};ngOnInit(){this.loadCadetes()}loadCadetes(){this.cadeteService.getCadetes().subscribe({next:e=>this.cadetes=e,error:e=>console.error("Error cargando cadetes",e)})}openModal(e){e?(this.isEditing=!0,this.currentCadete=P({},e)):(this.isEditing=!1,this.resetForm()),this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.currentCadete={nombre:"",apellido:"",vehiculo:"",telefono:"",activo:!0}}saveCadete(){this.isEditing&&this.currentCadete.id?this.cadeteService.updateCadete(this.currentCadete.id,this.currentCadete).subscribe({next:()=>{this.showSuccess("Cadete actualizado correctamente"),this.loadCadetes(),this.closeModal()},error:()=>this.showError("Error al actualizar cadete")}):this.cadeteService.createCadete(this.currentCadete).subscribe({next:()=>{this.showSuccess("Cadete creado correctamente"),this.loadCadetes(),this.closeModal()},error:e=>{console.error("Error creating cadete:",e);let r=e.error?.message||e.message||"Error desconocido",t=e.status||"N/A";this.showError(`Error al crear cadete (${t}): ${r}`)}})}deleteCadete(e){h.default.fire({title:"\xBFEliminar Cadete?",text:"No podr\xE1s revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff6b6b",cancelButtonColor:"#6c757d",confirmButtonText:"S\xED, eliminar",background:"#1a1a1a",color:"#f8edda"}).then(r=>{r.isConfirmed&&this.cadeteService.deleteCadete(e).subscribe({next:()=>{this.showSuccess("Cadete eliminado"),this.loadCadetes()},error:()=>this.showError("Error al eliminar")})})}showSuccess(e){h.default.fire({title:"\xC9xito",text:e,icon:"success",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#edb110"})}showError(e){h.default.fire({title:"Error",text:e,icon:"error",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#ff6b6b"})}static \u0275fac=function(r){return new(r||c)};static \u0275cmp=w({type:c,selectors:[["app-admin-cadetes"]],decls:28,vars:3,consts:[[1,"dashboard-container"],[1,"header-section"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-responsive"],[1,"cadetes-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"actions-cell"],[1,"btn-icon","edit",3,"click"],[1,"fas","fa-edit"],[1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"empty-message"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","required","","placeholder","Nombre",3,"ngModelChange","ngModel"],["name","apellido","required","","placeholder","Apellido",3,"ngModelChange","ngModel"],["name","vehiculo","required","","placeholder","Ej: Moto Honda 150cc",3,"ngModelChange","ngModel"],["name","telefono","required","","placeholder","Whatsapp de contacto",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox","name","activo",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"]],template:function(r,t){r&1&&(b(0,"app-navbar"),n(1,"div",0)(2,"div",1)(3,"h1"),i(4,"Gesti\xF3n de Cadetes"),o(),n(5,"button",2),g("click",function(){return t.openModal()}),b(6,"i",3),i(7," Nuevo Cadete "),o()(),n(8,"div",4)(9,"table",5)(10,"thead")(11,"tr")(12,"th"),i(13,"Nombre"),o(),n(14,"th"),i(15,"Apellido"),o(),n(16,"th"),i(17,"Veh\xEDculo"),o(),n(18,"th"),i(19,"Tel\xE9fono"),o(),n(20,"th"),i(21,"Estado"),o(),n(22,"th"),i(23,"Acciones"),o()()(),n(24,"tbody"),x(25,H,17,7,"tr",6)(26,R,3,0,"tr",7),o()()()(),x(27,J,29,6,"div",8)),r&2&&(d(25),f("ngForOf",t.cadetes),d(),f("ngIf",t.cadetes.length===0),d(),f("ngIf",t.showModal))},dependencies:[V,y,k,q,D,F,T,A,N,W,z,B,I],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:80px auto 0;color:#f8edda}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#edb110;text-transform:uppercase;letter-spacing:2px}.header-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#edb110;color:#0a332e;border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:700;cursor:pointer;transition:transform .2s}.header-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.table-responsive[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:12px;padding:1rem;backdrop-filter:blur(10px);border:1px solid rgba(237,177,16,.1)}.cadetes-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.cadetes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .cadetes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.1)}.cadetes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#edb110;text-transform:uppercase;font-size:.9rem}.cadetes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:1rem}.cadetes-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.3rem .8rem;border-radius:20px;font-size:.8rem;background:#ffffff1a;color:#fff9}.cadetes-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#edb11033;color:#edb110;border:1px solid rgba(237,177,16,.4)}.cadetes-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{display:flex;gap:.5rem}.cadetes-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .2s}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:#f8edda}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background:#ffffff1a}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#ff6b6b}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ff6b6b1a}.cadetes-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;opacity:.6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#1a1a1a;padding:2rem;border-radius:12px;width:90%;max-width:500px;border:1px solid #edb110;color:#f8edda;position:relative}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;color:#f8edda;font-size:1.5rem;cursor:pointer}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#edb110;margin-bottom:1.5rem;text-align:center}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#edb110;font-size:.9rem}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);color:#f8edda;border-radius:6px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#edb110}.modal-content[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.modal-content[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:#edb110;color:#0a332e;border:none;border-radius:8px;font-weight:700;cursor:pointer;margin-top:1rem}.modal-content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}"]})}return c})();export{ne as AdminCadetesComponent};
