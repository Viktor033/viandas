import{a as k}from"./chunk-T4D7VLDE.js";import{c as F,d as N}from"./chunk-ITRDCXCC.js";import{C as g,D as p,E as u,M as w,R as S,aa as O,ba as E,c as A,ca as W,da as V,ea as T,f as x,fa as z,g as s,h as c,l,la as B,m as h,ma as D,n as b,na as I,o as f,r as o,s as n,t as M,u as y,v,w as m,x as P,y as a}from"./chunk-N27RI3VB.js";var _=A(F());function L(d,C){d&1&&(o(0,"span"),a(1,"Guardar Cambios"),n())}function j(d,C){d&1&&(o(0,"span"),a(1,"Guardando..."),n())}function q(d,C){if(d&1){let i=y();o(0,"form",6,0),v("ngSubmit",function(){s(i);let e=m();return c(e.onSubmit())}),o(2,"div",7)(3,"h3"),a(4,"Datos Personales"),n(),o(5,"div",8)(6,"div",9)(7,"label",10),a(8,"Nombre"),n(),o(9,"input",11),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.nombre,e)||(r.usuario.nombre=e),c(e)}),n()(),o(10,"div",9)(11,"label",12),a(12,"Apellido"),n(),o(13,"input",13),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.apellido,e)||(r.usuario.apellido=e),c(e)}),n()()(),o(14,"div",9)(15,"label",14),a(16,"Tel\xE9fono"),n(),o(17,"input",15),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.telefono,e)||(r.usuario.telefono=e),c(e)}),n()()(),M(18,"hr",16),o(19,"div",7)(20,"h3"),a(21,"Direcci\xF3n de Env\xEDo"),n(),o(22,"div",9)(23,"label",17),a(24,"Calle y Altura"),n(),o(25,"input",18),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.direccion,e)||(r.usuario.direccion=e),c(e)}),n()(),o(26,"div",8)(27,"div",9)(28,"label",19),a(29,"Piso (Op)"),n(),o(30,"input",20),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.piso,e)||(r.usuario.piso=e),c(e)}),n()(),o(31,"div",9)(32,"label",21),a(33,"Depto (Op)"),n(),o(34,"input",22),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.departamento,e)||(r.usuario.departamento=e),c(e)}),n()()(),o(35,"div",9)(36,"label",23),a(37,"Barrio / Zona"),n(),o(38,"input",24),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.zona,e)||(r.usuario.zona=e),c(e)}),n()(),o(39,"div",9)(40,"label",25),a(41,"Observaciones para el delivery"),n(),o(42,"textarea",26),u("ngModelChange",function(e){s(i);let r=m();return p(r.usuario.observaciones,e)||(r.usuario.observaciones=e),c(e)}),n()()(),o(43,"div",27)(44,"button",28),b(45,L,2,0,"span",29)(46,j,2,0,"span",29),n()()()}if(d&2){let i=P(1),t=m();l(9),g("ngModel",t.usuario.nombre),l(4),g("ngModel",t.usuario.apellido),l(4),g("ngModel",t.usuario.telefono),l(8),g("ngModel",t.usuario.direccion),l(5),g("ngModel",t.usuario.piso),l(4),g("ngModel",t.usuario.departamento),l(4),g("ngModel",t.usuario.zona),l(4),g("ngModel",t.usuario.observaciones),l(2),f("disabled",t.loading||!i.form.valid),l(),f("ngIf",!t.loading),l(),f("ngIf",t.loading)}}function U(d,C){d&1&&(o(0,"div",30)(1,"p"),a(2,"Cargando perfil..."),n()())}var ee=(()=>{class d{authService=x(I);clienteService=x(k);usuario=null;loading=!1;ngOnInit(){this.loadUser()}loadUser(){let i=this.authService.getUserData();i&&i.id&&(this.loading=!0,this.clienteService.getCliente(i.id).subscribe({next:t=>{this.usuario=t,this.loading=!1},error:t=>{console.error("Error cargando perfil",t),this.loading=!1,_.default.fire({icon:"error",title:"Error",text:"No se pudo cargar la informaci\xF3n del perfil.",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#edb110"})}}))}onSubmit(){!this.usuario||!this.usuario.id||(this.loading=!0,this.clienteService.updateCliente(this.usuario.id,this.usuario).subscribe({next:i=>{this.loading=!1,_.default.fire({icon:"success",title:"\xA1Perfil Actualizado!",text:"Tus datos se han guardado correctamente.",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#edb110"})},error:i=>{console.error("Error actualizando perfil",i),this.loading=!1;let t="No se pudo actualizar el perfil.";i.error&&typeof i.error=="string"&&(t=i.error),_.default.fire({icon:"error",title:"Error",text:t,background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#edb110"})}}))}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=h({type:d,selectors:[["app-profile"]],decls:10,vars:2,consts:[["profileForm","ngForm"],[1,"profile-container","fade-in"],[1,"profile-card"],[1,"profile-header"],[3,"ngSubmit",4,"ngIf"],["class","loading-state",4,"ngIf"],[3,"ngSubmit"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","apellido"],["type","text","id","apellido","name","apellido","required","",3,"ngModelChange","ngModel"],["for","telefono"],["type","text","id","telefono","name","telefono","required","",3,"ngModelChange","ngModel"],[1,"divider"],["for","direccion"],["type","text","id","direccion","name","direccion","placeholder","Ej: Av. San Mart\xEDn 1234",3,"ngModelChange","ngModel"],["for","piso"],["type","text","id","piso","name","piso",3,"ngModelChange","ngModel"],["for","departamento"],["type","text","id","departamento","name","departamento",3,"ngModelChange","ngModel"],["for","zona"],["type","text","id","zona","name","zona","placeholder","Ej: Centro, Alberdi...",3,"ngModelChange","ngModel"],["for","observaciones"],["id","observaciones","name","observaciones","rows","3","placeholder","Ej: Timbre no anda, dejar en porter\xEDa...",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn-save",3,"disabled"],[4,"ngIf"],[1,"loading-state"]],template:function(t,e){t&1&&(M(0,"app-navbar"),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),a(5,"Mi Perfil"),n(),o(6,"p"),a(7,"Actualiza tus datos de contacto y direcci\xF3n de env\xEDo."),n()(),b(8,q,47,11,"form",4)(9,U,3,0,"div",5),n()()),t&2&&(l(8),f("ngIf",e.usuario),l(),f("ngIf",!e.usuario&&e.loading))},dependencies:[S,w,D,z,O,E,W,B,T,V,N],styles:[".profile-container[_ngcontent-%COMP%]{padding:8rem 1rem 2rem;min-height:100vh;display:flex;justify-content:center;align-items:flex-start}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease}.profile-card[_ngcontent-%COMP%]{background-color:var(--bg-card);border:1px solid var(--border-color);box-shadow:var(--card-shadow);border-radius:16px;padding:2.5rem;width:100%;max-width:700px;color:var(--text-color)}.profile-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem;margin-bottom:.5rem}.profile-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted)}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--accent-color);margin-bottom:1rem;font-size:1.2rem;border-bottom:1px solid rgba(237,177,16,.2);padding-bottom:.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 600px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-color);font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.8rem;background-color:var(--bg-color);border:1px solid #444;border-radius:8px;color:var(--text-color);font-size:1rem;outline:none;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)}.divider[_ngcontent-%COMP%]{border:0;height:1px;background-color:#444;margin:2rem 0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding:.8rem 2rem;background-color:var(--primary-color);color:#000;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #edb11066}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-muted)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})}return d})();export{ee as ProfileComponent};
