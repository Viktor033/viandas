import{a as L}from"./chunk-THZBDTP5.js";import{c as G,d as q}from"./chunk-GMOZJTMW.js";import{a as A,b as T,c as N,d as W,e as I,f as B,g as z,m as F,n as D}from"./chunk-WBCBZC34.js";import{C as O,G as M,J as f,K as y,M as n,N as o,O as b,P as v,Q as g,R as m,T as r,U as p,V as S,X as u,Y as C,Z as _,a as P,d as j,ja as E,ka as k,o as w,pa as V,q as l,r as s,z as c}from"./chunk-GBG54TIV.js";var h=j(G());function H(d,x){if(d&1){let e=v();n(0,"tr")(1,"td"),r(2),o(),n(3,"td"),r(4),o(),n(5,"td"),r(6),o(),n(7,"td"),r(8),o(),n(9,"td")(10,"span",9),r(11),o()(),n(12,"td",10)(13,"button",11),g("click",function(){let t=l(e).$implicit,a=m();return s(a.openModal(t))}),b(14,"i",12),o(),n(15,"button",13),g("click",function(){let t=l(e).$implicit,a=m();return s(a.deleteCadete(t.id))}),b(16,"i",14),o()()()}if(d&2){let e=x.$implicit;c(2),p(e.nombre),c(2),p(e.apellido),c(2),p(e.vehiculo),c(2),p(e.telefono),c(2),y("active",e.activo),c(),S(" ",e.activo?"Activo":"Inactivo"," ")}}function R(d,x){d&1&&(n(0,"tr")(1,"td",15),r(2,"No hay cadetes registrados"),o()())}function U(d,x){if(d&1){let e=v();n(0,"div",16),g("click",function(){l(e);let t=m();return s(t.closeModal())}),n(1,"div",17),g("click",function(t){return l(e),s(t.stopPropagation())}),n(2,"button",18),g("click",function(){l(e);let t=m();return s(t.closeModal())}),r(3,"\xD7"),o(),n(4,"h2"),r(5),o(),n(6,"form",19),g("ngSubmit",function(){l(e);let t=m();return s(t.saveCadete())}),n(7,"div",20)(8,"label"),r(9,"Nombre"),o(),n(10,"input",21),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.nombre,t)||(a.currentCadete.nombre=t),s(t)}),o()(),n(11,"div",20)(12,"label"),r(13,"Apellido"),o(),n(14,"input",22),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.apellido,t)||(a.currentCadete.apellido=t),s(t)}),o()(),n(15,"div",20)(16,"label"),r(17,"Veh\xEDculo"),o(),n(18,"input",23),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.vehiculo,t)||(a.currentCadete.vehiculo=t),s(t)}),o()(),n(19,"div",20)(20,"label"),r(21,"Tel\xE9fono"),o(),n(22,"input",24),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.telefono,t)||(a.currentCadete.telefono=t),s(t)}),o()(),n(23,"div",25)(24,"label")(25,"input",26),_("ngModelChange",function(t){l(e);let a=m();return C(a.currentCadete.activo,t)||(a.currentCadete.activo=t),s(t)}),o(),r(26," Cadete Activo (Disponible para repartos) "),o()(),n(27,"button",27),r(28,"Guardar"),o()()()()}if(d&2){let e=m();c(5),p(e.isEditing?"Editar Cadete":"Nuevo Cadete"),c(5),u("ngModel",e.currentCadete.nombre),c(4),u("ngModel",e.currentCadete.apellido),c(4),u("ngModel",e.currentCadete.vehiculo),c(4),u("ngModel",e.currentCadete.telefono),c(3),u("ngModel",e.currentCadete.activo)}}var ne=(()=>{class d{cadeteService=w(L);cadetes=[];showModal=!1;isEditing=!1;currentCadete={nombre:"",apellido:"",vehiculo:"",telefono:"",activo:!0};ngOnInit(){this.loadCadetes()}loadCadetes(){this.cadeteService.getCadetes().subscribe({next:e=>this.cadetes=e.filter(i=>i.activo!==!1),error:e=>console.error("Error cargando cadetes",e)})}openModal(e){e?(this.isEditing=!0,this.currentCadete=P({},e)):(this.isEditing=!1,this.resetForm()),this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.currentCadete={nombre:"",apellido:"",vehiculo:"",telefono:"",activo:!0}}saveCadete(){this.isEditing&&this.currentCadete.id?this.cadeteService.updateCadete(this.currentCadete.id,this.currentCadete).subscribe({next:()=>{this.showSuccess("Cadete actualizado correctamente"),this.loadCadetes(),this.closeModal()},error:()=>this.showError("Error al actualizar cadete")}):this.cadeteService.createCadete(this.currentCadete).subscribe({next:()=>{this.showSuccess("Cadete creado correctamente"),this.loadCadetes(),this.closeModal()},error:e=>{console.error("Error creating cadete:",e);let i=e.error?.message||e.message||"Error desconocido",t=e.status||"N/A";this.showError(`Error al crear cadete (${t}): ${i}`)}})}deleteCadete(e){h.default.fire({title:"\xBFEliminar Cadete?",text:"No podr\xE1s revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff6b6b",cancelButtonColor:"#6c757d",confirmButtonText:"S\xED, eliminar",background:"#1a1a1a",color:"#f8edda"}).then(i=>{i.isConfirmed&&this.cadeteService.deleteCadete(e).subscribe({next:()=>{this.showSuccess("Cadete eliminado"),this.loadCadetes()},error:()=>this.showError("Error al eliminar")})})}showSuccess(e){h.default.fire({title:"\xC9xito",text:e,icon:"success",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#edb110"})}showError(e){h.default.fire({title:"Error",text:e,icon:"error",background:"#1a1a1a",color:"#f8edda",confirmButtonColor:"#ff6b6b"})}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=O({type:d,selectors:[["app-admin-cadetes"]],decls:28,vars:3,consts:[[1,"dashboard-container"],[1,"header-section"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-responsive"],[1,"cadetes-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"actions-cell"],[1,"btn-icon","edit",3,"click"],[1,"fas","fa-edit"],[1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"empty-message"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","required","","placeholder","Nombre",3,"ngModelChange","ngModel"],["name","apellido","required","","placeholder","Apellido",3,"ngModelChange","ngModel"],["name","vehiculo","required","","placeholder","Ej: Moto Honda 150cc",3,"ngModelChange","ngModel"],["name","telefono","required","","placeholder","Whatsapp de contacto",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox","name","activo",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"]],template:function(i,t){i&1&&(b(0,"app-navbar"),n(1,"div",0)(2,"div",1)(3,"h1"),r(4,"Gesti\xF3n de Cadetes"),o(),n(5,"button",2),g("click",function(){return t.openModal()}),b(6,"i",3),r(7," Nuevo Cadete "),o()(),n(8,"div",4)(9,"table",5)(10,"thead")(11,"tr")(12,"th"),r(13,"Nombre"),o(),n(14,"th"),r(15,"Apellido"),o(),n(16,"th"),r(17,"Veh\xEDculo"),o(),n(18,"th"),r(19,"Tel\xE9fono"),o(),n(20,"th"),r(21,"Estado"),o(),n(22,"th"),r(23,"Acciones"),o()()(),n(24,"tbody"),M(25,H,17,7,"tr",6)(26,R,3,0,"tr",7),o()()()(),M(27,U,29,6,"div",8)),i&2&&(c(25),f("ngForOf",t.cadetes),c(),f("ngIf",t.cadetes.length===0),c(),f("ngIf",t.showModal))},dependencies:[V,E,k,q,D,z,T,A,N,W,F,B,I],styles:[".dashboard-container[_ngcontent-%COMP%]{min-height:100vh;padding-top:100px;padding-bottom:2rem;padding-left:1rem;padding-right:1rem;background-color:var(--bg-color);font-family:Segoe UI,sans-serif;color:var(--text-color);position:relative}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:1200px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--primary-color);text-transform:uppercase;letter-spacing:2px}.header-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:700;cursor:pointer;transition:transform .2s}.header-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.table-responsive[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:12px;padding:1rem;box-shadow:var(--card-shadow);border:1px solid rgba(0,0,0,.05)}.cadetes-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.cadetes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .cadetes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid rgba(0,0,0,.1);color:var(--text-color)}.cadetes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--primary-color);text-transform:uppercase;font-size:.9rem}.cadetes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:1rem}.cadetes-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.3rem .8rem;border-radius:20px;font-size:.8rem;background:#0000000d;color:var(--text-muted)}.cadetes-table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#edb1101a;color:var(--primary-color);border:1px solid var(--primary-color)}.cadetes-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{display:flex;gap:.5rem}.cadetes-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .2s}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--text-color)}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background:#0000000d}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#ff6b6b}.cadetes-table[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ff6b6b1a;transform:scale(1.1)}.cadetes-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;opacity:.6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:var(--bg-card);padding:2rem;border-radius:12px;width:90%;max-width:500px;border:1px solid var(--border-color);color:var(--text-color);position:relative;box-shadow:var(--card-shadow)}.modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--text-color);font-size:1.5rem;cursor:pointer}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:1.5rem;text-align:center}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-color);font-weight:500;font-size:.9rem}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--bg-color);border:1px solid rgba(0,0,0,.1);color:var(--text-color);border-radius:6px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.modal-content[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;color:var(--text-color)}.modal-content[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.modal-content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;margin-top:1rem}.modal-content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}"]})}return d})();export{ne as AdminCadetesComponent};
